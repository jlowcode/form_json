define(["jquery","fab/fabrik"],function(e,t){"use strict";return new Class({Implements:[Events],initialize:function(t){this.options=e.extend(this.options,t),"form"===this.options.view&&this.addWatchButton()},addWatchButton:function(){var n=document.getElementById("plugin_selected"),i=document.getElementById("plugin_params");n.onclick=(()=>{var n=document.getElementById("select_plugin");e.ajax({url:t.liveSite+"index.php",method:"POST",data:{option:"com_fabrik",format:"raw",task:"plugin.pluginAjax",plugin:"form_json",method:"createHtmlPluginFromXml",g:"element",element_id:this.options.element_id,plugin_selected:n.value}}).done(e=>{var t=document.createElement("div");for(t.innerHTML=JSON.parse(e);i.firstChild;)i.removeChild(i.lastChild);i.appendChild(t.firstChild)})})}})});